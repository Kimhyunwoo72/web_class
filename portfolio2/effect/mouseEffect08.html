<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>마우스 이펙트</title>

    <!-- 파비콘 -->
    <link rel="shortcut icon" href="../../assets/face/javascript.png">
    <link rel="apple-touch-icon-precomposed" href="../../assets/face/javascript.png">
    <link rel="icon" href="../../assets/face/javascript.png" sizes="128x128">

    <link rel="stylesheet" href="css/NexonLv1Gothic.css">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/cdnjs.css">
    <link rel="stylesheet" href="./css/common.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,600;1,700&display=swap');

        body::before {
            /* background: rgba(70, 61, 56, 0.8); */
            background: #222;
        }

        .mouse__wrap {
            display: flex;
            justify-content: center;
            /* color: #ff6347; */
            padding: 1vw;
            width: 52%;
            height: 50vh;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #eae2cf;
            border-radius: 10px;
        }

        .mouse__cont {
            align-self: center;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            text-align: center;
        }
        @font-face {
	src: url('https://res.cloudinary.com/dr6lvwubh/raw/upload/v1529908256/CompressaPRO-GX.woff2');
	font-family:'Compressa VF';
	font-style: normal;
}
html {
	height:100%;
}
body {
	padding: 0;
	margin: 0;
	overflow: hidden;
	background-color: #211D26;
	display: flex;
	justify-content: center;
	height: 100%;
	align-items: center;
}

h1 {
	font-family:'Compressa VF';
	text-rendering: optimizeSpeed;
	color: #D11B3D;
	width: 100%;
	user-select: none;
	line-height: 0.8em;
	margin: 0 auto;
	text-transform: uppercase;
	font-weight: 100;
	text-align: center;
	width: 100vw;
}
h1 span {
	transform: translateY(-10px);
	user-select: none;
}
h1.flex {
	display: flex;
	justify-content: space-between;
}
h1.stroke span {
	position: relative;
	color: #211D26;
	line-height: inherit;
}
h1.stroke span:after {
	content: attr(data-char);
	-webkit-text-stroke-width: 3px;
	-webkit-text-stroke-color: #FE6730;
	position: absolute;
	left: 0;
	line-height: inherit;
	color: transparent;
	z-index: -1;
}
        @media (max-width: 1200px) {
        .mouse__wrap {
            height: 70vh;
        }
        }
        @media (max-width: 730px) {
        .mouse__wrap {
            width: 100%;
            height: 70vh;
        }
        }
    </style>
</head>

<body class="img08">
    <div id="main">
        <h1 id="title">Compressa</h1>
    </div>
    <main>
        <div class="cursor"></div>
        <div class="mouse__wrap">
            <section class="mouse__cont">
         
            </section>
        </div>
    </main>


    <!-- info  -->
    <div class="info">
        <div class="title">
            <h1><a href="./mouseEffect.html">javascript mouse Effect08</a></h1>
            <span>마우스 이펙트 - 텍스트 효과2</span>
        </div>

        <div class="number">
            <ul>
                <li><a href="mouseEffect01.html">1</a></li>
                <li><a href="mouseEffect02.html">2</a></li>
                <li><a href="mouseEffect03.html">3</a></li>
                <li><a href="mouseEffect04.html">4</a></li>
                <li><a href="mouseEffect05.html">5</a></li>
                <li><a href="mouseEffect06.html">6</a></li>
                <li><a href="mouseEffect07.html">7</a></li>
                <li class="active"><a href="mouseEffect08.html">8</a></li>
            </ul>
        </div>

        <div class="source">
            <button class="source-btn">소스보기</button>
            <div id="modal">
                <div class="modal-wrap">
                    <div class="modal-cont">
                        <div class="code-view">
                            <div class="view-header" aria-hidden="true">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                            <div class="view-title">
                                <ul>
                                    <li class="active"><a href="#">HTML</a></li>
                                    <li><a href="#">CSS</a></li>
                                    <li><a href="#">JavaScript</a></li>
                                </ul>
                            </div>
                            <div class="view-cont">
                                <div>
                                    <pre><code class="language-html">
                       

    &lt;main&gt;
        &lt;section id="mouseType01"&gt;
            &lt;div class="cursor"&gt;&lt;/div&gt;
            &lt;div class="mouse__wrap"&gt;
                &lt;section class="mouse__cont"&gt;
                    &lt;p>If you can always focus on the present, you will be happy.&lt;/p>&lt;hr>&lt;p&gt; class='two'>언제나 현재에 집중할수 있다면 행복할것이다.&lt;/p&gt;
                &lt;/section&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/main&gt;
</code></pre>
                                </div>
                                <div>
                                    <pre><code class="language-css">


    body::before {
        background: rgba(70, 61, 56, 0.8);
    }

    .mouse__wrap {
        display: flex;
        justify-content: center;
        padding: 20px;
        width: 52%;
        height: 50vh;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        background: #eae2cf;
        border-radius: 10px;
    }
    .mouse__cont {
        align-self: center;
        font-family: "Playfair Display", cursive;
        font-weight: bold;
        text-align: center;
    }
    .mouse__cont p.two {
        margin: -0.5rem 0;
        padding: 0;
    }

    hr {
        height: 25px;
        border-style: solid;
        border-color: #e84d5b;
        border-width: 1px 0 0 0;
        border-radius: 20px;
    }
    hr:before {
        display: block;
        content: "";
        height: 30px;
        margin-top: -31px;
        border-style: solid;
        border-color: #e84d5b;
        border-width: 0 0 1px 0;
        border-radius: 20px;
    }

    </code></pre>
                                </div>
                                <div>
                                    <pre><code class="language-javascript">


    (function(){
        var Part = function(x,y){
            this.x = x;
            this.y = y;
            this.bx = x;
            this.by = y;
            this.ax = 0;
            this.ay = 0;
            this.r;
            this.g;
            this.b;
            this.a;
    };
    Part.prototype = {
        r : function (v) { this.r = v;return this; },
        g : function (v) { this.g = v;return this; },
        b : function (v) { this.b = v;return this; },
        a : function (v) { this.a = v;return this; },
    };
    var String = function(str){
        this.fontSize = 50;
        this.font = 'Playfair Display';
        this.str = str;
        this.strWidth;
        this.d = document;
        this.c;
        this.$;
        this.parr = [];
        this.set();
    };
    String.prototype = {
        set : function(){
            var c = this.d.createElement('canvas');
            var $ = c.getContext('2d');
            $.strokeStyle = '#EAE2CF';
            $.textBaseline = 'top';
            $.font =  '45px Playfair Display';
            c.width = $.measureText(this.str).width;
            this.strWidth = c.width;
            c.height = ~~(45 * 1.6);
            $.strokeStyle = '#EAE2CF';
            $.textBaseline = 'top';
            $.font = '45px Playfair Display';
            $.fillText(this.str,0,0);
            this.c = c;
            this.$ = $;
        },
        app : function(e){
            e.appendChild(this.c);
            this.build();
            this.ev();
            return this;
        },
        el : function(){
            return this.c;
        },
        build : function(){
            var w = this.c.width,
                h = this.c.height,
                id =  this.$.getImageData(0,0,w,h).data,
                l = id.length
            ;
            for(var i=0;i&lt;l;i+=4){
                var y = ~~(i / (w*4));
                var x = (i/4)%w;
                var r = id[i];
                var g = id[i+1];
                var b = id[i+2];
                var a = id[i+3];
                if (r+g+b&lt;100 && a>50){
                    this.parr.push( (new Part(x,y)).r(r).g(g).b(b).a(a) );
                }
            }
        },
        ev : function(){
            var _this = this;
            this.c.onmouseover = function(){
                var __t = setInterval(_this.func(_this,_this.anim),50);
                setTimeout(function(){
                    clearInterval(__t);
                    var cnt = 10;
                    var time = setInterval(function(){
                        cnt--;
                        for(var i=0,l=_this.parr.length;i&lt;l;i++){
                            var p=_this.parr[i];
                            p.x = p.bx;
                            p.y = p.by + ((_this.fontSize-p.by) * (cnt) / 10);
                        }
                        _this._draw(_this.parr);
                        if (cnt&lt;=0) {
                            _this.$.clearRect(0,0,_this.c.width,_this.c.height);
                            _this.def(_this.parr);
                            _this._draw(_this.parr);
                            clearInterval(time);
                        }
                    },30);
                },3000);
            };
        },
        func : function(thisFunc,func){
            return function(){
                func.call(thisFunc);
            };
        },
        anim : function(){
            this._move(this.parr);
            this._draw(this.parr);
        },
        _draw : function(parr){
                this.$.fillStyle = '#EAE2CF';
                this.$.fillRect(0,0,this.c.width,this.c.height);
            for(var i=0,l=parr.length;i&lt;l;i++){
                var p=parr[i],x=~~p.x,y=~~p.y;
                this.$.fillStyle = '#E84D5B';
                this.$.fillRect(x,y,1,1);
            }
        },
        _move : function(parr){
            for(var i=0,l=parr.length;i&lt;l;i++){
                var p=parr[i];
                p.ax == 0 ? p.ax = 0.2*(Math.random()-0.5) : p.ax *= 1.1;
                p.ay == 0 ? p.ay = (Math.random()) : p.ay *= 1.1;
                p.x += p.ax;
                p.y += p.ay;
            }
        },
        def : function(parr){
            for(var i=0,l=parr.length;i&lt;l;i++){
                var p=parr[i];
                p.x = p.bx;
                p.y = p.by;
                p.ax = p.ay = 0;
            }
        }
    };
    
    setTimeout(function(){
        var loc = document.querySelectorAll('p,section');
        var start = (new Date().getTime())/1000;
        Array.prototype.map.call(loc,function(e){
            if ((new Date().getTime())/1000 > start+5) return;
            var nodes = Array.prototype.slice.call(e.childNodes);
            nodes.map(function(n){
                if ((new Date().getTime())/1000 > start+5) return;
                if (n instanceof Text){
                    var id = n.textContent || n.id;
                    var frag = document.createDocumentFragment();
                    id.split('').map(function(str){
                        if(str==='' || str==='\n' || str==='\r' || str==='\t')return;
                        (new String(str)).app(frag).el().style.verticalAlign = 'top';
                    });
                    e.replaceChild( frag , n );
                }
            });
            
        });
    },0);

})();
    </code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="modal-close">닫기</button>
                </div>
            </div>
        </div>
        <!-- //info -->

        <!-- script -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.5/dat.gui.min.js"></script>
        <script src="js/gsap.min.js"></script>
        <script src="js/highlight.min.js"></script>
        <script src="js/custom.js"></script>
        <script>
                    tabMenu()
            hljs.highlightAll();
            modal()
 var maxDist;
var mouse = { x: 0, y: 0 };
var cursor = {
    x: window.innerWidth,
    y: window.innerHeight
};

Math.dist = function(a, b) {
    var dx = b.x - a.x;
    var dy = b.y - a.y;
    return Math.sqrt(Math.pow(dx, 2), Math.pow(dy, 2));
}

window.addEventListener("mousemove", function(e) {
    cursor.x = e.clientX;
    cursor.y = e.clientY;
});

window.addEventListener("touchmove", function(e) {
    var t = e.touches[0];
    cursor.x = t.clientX;
    cursor.y = t.clientY;
}, {
    passive: false
});

var Char = function(container, char) {
    var span = document.createElement("span");
    span.setAttribute('data-char', char);
    span.innerText = char;
    container.appendChild(span);
    this.getDist = function() {
        this.pos = span.getBoundingClientRect();
        return Math.dist(mouse, {
            x: this.pos.x + (this.pos.width / 1.75),
            y: this.pos.y
        });
    }
    this.getAttr = function(dist, min, max) {
        var wght = max - Math.abs((max * dist / maxDist));
        return Math.max(min, wght + min);
    }
    this.update = function(args) {
        var dist = this.getDist();
        this.wdth = args.wdth ? ~~this.getAttr(dist, 5, 200) : 100;
        this.wght = args.wght ? ~~this.getAttr(dist, 100, 800) : 400;
        this.alpha = args.alpha ? this.getAttr(dist, 0, 1).toFixed(2) : 1;
        this.ital = args.ital ? this.getAttr(dist, 0, 1).toFixed(2) : 0;
        this.draw();
    }
    this.draw = function() {
        var style = "";
        style += "opacity: " + this.alpha + ";";
        style += "font-variation-settings: 'wght' " + this.wght + ", 'wdth' " + this.wdth + ", 'ital' " + this.ital + ";";
        span.style = style;
    }
    return this;
}

var VFont = function() {
    this.scale = false;
    this.flex = true;
    this.alpha = false;
    this.stroke = false;
    this.width = true;
    this.weight = true;
    this.italic = true;
    var title, str, chars = [];

    this.init = function() {
        title = document.getElementById("title");
        str = title.innerText;
        title.innerHTML = "";
        for (var i = 0; i < str.length; i++) {
            var _char = new Char(title, str[i]);
            chars.push(_char);
        }
        this.set();
        window.addEventListener("resize", this.setSize.bind(this));
    }

    this.set = function() {
        title.className = "";
        title.className += this.flex ? " flex" : "";
        title.className += this.stroke ? " stroke" : "";
        this.setSize();
    }

    this.setSize = function() {
        var fontSize = window.innerWidth / (str.length / 2);
        title.style = "font-size: " + fontSize + "px;";
        if (this.scale) {
            var scaleY = (window.innerHeight / title.getBoundingClientRect().height).toFixed(2);
            var lineHeight = scaleY * 0.8;
            title.style = "font-size: " + fontSize + "px; transform: scale(1," + scaleY + "); line-height: " + lineHeight + "em;"
        }
    }

    this.animate = function() {
        mouse.x += (cursor.x - mouse.x) / 20;
        mouse.y += (cursor.y - mouse.y) / 20;
        requestAnimationFrame(this.animate.bind(this));
        this.render();
    }

    this.render = function() {
        maxDist = title.getBoundingClientRect().width / 2;
        for (var i = 0; i < chars.length; i++) {
            chars[i].update({
                wght: this.weight,
                wdth: this.width,
                ital: this.italic,
                alpha: this.alpha
            });
        }
    }
    this.init();
    this.animate();
    return this;
}

var txt = new VFont();
var gui = new dat.GUI();
gui.add(txt, 'flex').onChange(txt.set.bind(txt));
gui.add(txt, 'scale').onChange(txt.set.bind(txt));
gui.add(txt, 'alpha').onChange(txt.set.bind(txt));
gui.add(txt, 'stroke').onChange(txt.set.bind(txt));
// gui.add(txt, 'width').onChange(txt.set.bind(txt));
gui.add(txt, 'weight').onChange(txt.set.bind(txt));
gui.add(txt, 'italic').onChange(txt.set.bind(txt));

    
        </script>
</body>

</html>